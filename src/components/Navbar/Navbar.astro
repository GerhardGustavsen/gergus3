---
const path = Astro.url.pathname;
import DarkMode from "./DarkMode.astro";
---

<div>
  <nav id="navbar" class="navbar">
    <div class="heightbox">
      <ul>
        <li><a href="/" class={path === "/" ? "active" : ""}>home</a></li>

        <li>
          by me
          <ul>
            <li>
              <a
                href="/projects"
                class={path.startsWith("/projects") ? "active" : ""}>projects</a
              >
            </li>
            <li>
              <a
                href="/writings"
                class={path.startsWith("/writings") ? "active" : ""}
              >
                writings
              </a>
            </li>
            <li>
              <a
                href="/photos"
                class={path.startsWith("/photos") ? "active" : ""}>photos</a
              >
            </li>
          </ul>
        </li>

        <li>
          for you
          <ul>
            <li>
              <a
                href="/garden"
                class={path.startsWith("/garden") ? "active" : ""}>garden</a
              >
            </li>
            <li>
              <a
                href="/guestbook"
                class={path.startsWith("/guestbook") ? "active" : ""}
                >guestbook</a
              >
            </li>
            <li>
              <a href="/about" class={path.startsWith("/about") ? "active" : ""}
                >about</a
              >
            </li>
          </ul>
        </li>

        <li>
          what I love
          <ul>
            <li>
              <a
                href="/books"
                class={path.startsWith("/writings") ? "active" : ""}>books</a
              >
            </li>
            <li>
              <a
                href="/movies"
                class={path.startsWith("/writings") ? "active" : ""}>movies</a
              >
            </li>
            <li>
              <a
                href="/archive"
                class={path.startsWith("/writings") ? "active" : ""}>archive</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="/links" class={path.startsWith("/writings") ? "active" : ""}
            >my links</a
          >
        </li>
      </ul>
      <DarkMode />
    </div>
  </nav>

  <btn class="burger">
    <p>~</p>
    <p>~</p>
    <p>~</p>
  </btn>
</div>

<script is:inline>
  let expanded = false;

  const nav = document.getElementById("navbar");
  const burger = document.querySelector(".burger");
  burger.addEventListener("click", () => {
    if (expanded === true) {
      nav.classList.toggle("animate");
      setTimeout(() => {
        nav.classList.toggle("expanded");
      }, 200);
      expanded = false;
    } else {
      nav.classList.toggle("expanded");
      setTimeout(() => {
        nav.classList.toggle("animate");
      }, 0);
      expanded = true;
    }
    burger.classList.toggle("clicked");
  });
</script>
<!-- ######################## CSS ######################## -->

<style>
  .navbar {
    position: fixed;
    height: 100%;
    display: flex;
    align-items: center;
    padding-left: 6em;
    transition: opacity 0.2s ease;
    z-index: 100;

    ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    li {
      margin: 0.3em 0px;
      margin-bottom: 1em;

      li {
        margin-bottom: 0em;
        margin-left: 0.5em;
      }
    }

    a {
      text-decoration: none;
      color: inherit;
      transition: padding-left 0.15s ease;
    }
    a:hover {
      text-decoration: underline;
    }

    .active {
      color: var(--color-accent);
    }
  }

  .burger {
    font-size: 2.5em;
    width: 1em;
    height: 1em;
    position: fixed;
    cursor: pointer;
    color: var(--color-text);
    p {
      margin: -0.33em 0em -1.06em 0.07em;

      user-select: none;
    }
    display: none;

    transition: color 0.3s ease;
  }
  .burger:hover {
    color: var(--color-accent);
  }

  @media (max-width: calc(1100px)) {
    .navbar {
      visibility: hidden;
      opacity: 0;
    }

    .burger {
      display: block;
    }

    .expanded {
      visibility: visible;

      background-color: var(--color-bg);
      background-image: url("/images/texture.png");
      background-repeat: repeat;
      background-size: 400px;

      z-index: 100;
      width: 100%;
      padding-left: 0;
      .heightbox {
        margin: auto;
      }
    }

    .animate {
      opacity: 1;
    }

    .clicked {
      color: var(--color-accent);
    }

    .clicked:hover {
      color: var(--color-text);
    }
  }
</style>
